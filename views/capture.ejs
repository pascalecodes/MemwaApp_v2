<%- include('partials/log_header') -%>

<head>
    <title>Memwa Capture</title> 
</head>

<main id="capture-page-sec">
    <div class="px-4 py-5 my-5 text-center">
      <img class="d-block mx-auto mb-4" src="/imgs/logo.svg" alt="Memwa" width="120" height="120">
      <h1 class="display-5 fw-bold">Memwa CAPTURE</h1>
      <h5>Record a Story to Memwa</h5> 

<!-- need to work on chaning the record to kickoff another function to render the form to add the title and the description before you click submit and upload or download it.  s -->
    <div class="px-4  py-5 selfCapture-container-page">
      <h3>RECORD Video</h3>
        <div class="recording-box-capture">
            <p>Press START to record directly from your device</p>
            <video muted id="video" autoplay></video>
            <div class="btn-box">  
                <button type="button" class="btn" id="start-btn" style="background:green" data-bs-toggle="button"><i class="fa fa-video" style="font-size:24px" aria-hidden="true"> Start</i></button>
                <button class="btn" id="stop-btn" style="background:red"><i class="fa fa-stop-circle" style="font-size:24px" aria-hidden="true"> Stop</i></button> 
                <p id="message"></p>   
            </div>
            <div id=" form-container">
                <form id="uploadForm" style="display:none "> 
                <label for="title" class="form-label">Title</label>
                <input type="text" class="form-control" id="title" name="title" placeholder="Title">
                <label for="caption" class="form-label">Caption*</label>
                <textarea class="form-control" id="caption" name="caption"></textarea>
                <label for="description" class="form-label">Describe Your Content</label>
                <textarea class="form-control" id="description" style="height:8rem" name="description"></textarea>
                <label for="status">Status</label>
                <select name="status" id="status" class="form-select" aria-label="Default select example">
                  <option selected>Select visibility</option>
                  <option value="public" selected>Public</option>
                  <option value="private">Private</option>
                </select>
                <input type="hidden" class="form-control" id="videoBlob" name="videoBlob">
                <button type="submit" value="Upload">Upload</button>
              </form>
            </div>
            <div id="successMessage" style="display:none">
              <p>File successfully uploaded!</p>
              <a id="downloadLink" href="#" download ='' >Download</a>
              <p class="fst-italic">Click File link to download locally </p>
              <button id="done" >Done</button>
            </div>
        </div>
    </div>
    </div> 
</main>

<section id="uploadPageSec" class="px-4 py-5 my-5 text-center">
   <h1 class="display-5 fw-bold">Memwa UPLOAD</h1>
    <div class="col-lg-6 mx-auto">   
    <h5>Upload a Story to Memwa</h5> <p>You can upload videos, pictures, files and other moments from other sources</p>
    </div>
    <div>
      <div class="px-4 col-4 mx-auto">
      <h3>Single File Upload</h3>
      <form action="/post/createPost" enctype="multipart/form-data" method="POST">
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title" placeholder="Title">
            <label for="caption" class="form-label">Caption*</label>
            <textarea class="form-control" id="caption" name="caption"></textarea>
            <label for="description" class="form-label">Describe Your Content</label>
            <textarea class="form-control" id="description" style="height:8rem" name="description"></textarea>
            <label for="status">Status</label>
            <select name="status" id="status" class="form-select" aria-label="Default select example">
              <option selected>Select visibility</option>
              <option value="public" selected>Public</option>
              <option value="private">Private</option>
            </select>
          <input type="file" class="form-control" id="mediaUpload" name="file">
        </div>
        <button type="submit" class="btn btn-primary" value="Upload">Submit</button>
      </form>
      </div>
    </div>
    <div>
      <div class="px-4 col-4 mx-auto">
        <h3>Bulk File Upload</h3>
        <p>Upload more than one media file</p>
        <button id="upload_pop" class="cloudinary-button" style="background:blue" style="font-size:24px" aria-hidden="true"> Upload files</button>
      </div>
    </div>
</section>
<div class="px-4 py-5 my-5 text-center">
    <a class="btn btn-info" href="/feed">Return to Feed</a>
    <a class="btn btn-info" href="/profile">Return to Profile</a>
</div> 



    <script src="js/record.js" type="text/javascript"></script>
    <script src="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
     <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script 
     src="/js/upload_widget.js" 
     type="text/javascript">
    </script>
    <script src="node_modules/cloudinary-video-player/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
  
<%- include('partials/footer') -%>
