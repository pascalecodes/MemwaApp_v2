<%- include('partials/log_header') -%>

<head>
  
  <title>Memwa WATCH</title>
  <!-- <link href="node_modules/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
  <link href="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.css" rel="stylesheet"> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>

<section id="watchSection">
  <div class="px-4 py-5 my-5 text-center">
    <img class="d-block mx-auto mb-4" src="/imgs/logo.svg" alt="Memwa" width="120" height="120">
    <h1 class="display-5 fw-bold">Memwa WATCH</h1>
    <h5>Watch stories</h5> <p>from everywhere</p>
  </div>
  <!-- ########### testing version with dynamic library player -->
  <!-- The carousel container -->
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-9 mx-auto">
      <div id="videoCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <% for(var i=0; i<detail.length; i++) { %>
            <li data-target="#videoCarousel" data-slide-to="<%= i %>" <% if(i == 0) { %> class="active" <% } %> ></li>
          <% } %>
        </ol>
        <div class="carousel-inner">
          <% detail.forEach(function(video, index) { %>
            <div class="item <% if(index == 0) { %> active <% } %> ">
              <div class="text-overlay">
                <h3 class="video-title text-overlay"><%= video.title %></h3>
                <!-- <p><%= video.description %></p> -->
              </div>
              <%if(video.ext == '.mkv' || video.ext =='.mp4'){ %>
                <video class="embed-responsive-item" controls width="800" height="600" poster="<%= video.poster %>">
                  <source src="<%= video.url %>" type="video/webm">
                  <source src="<%= video.url %>" type="video/mp4">
                </video>
              <%}else {%>
                <center><image src="<%= video.url %>" type="jpg" class="embed-responsive-item" width="800" height="600" ></image></center>
              <%}%>
            </div>
          <% }); %>
        </div>
        <a class="left carousel-control" href="#videoCarousel"  data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#videoCarousel" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
    <div class="col-md-3">
      <h3>Playlist</h3>
      <div id="videoPlaylist">
        <% detail.forEach(function(video, index) { %>
          <a href="#videoCarousel" data-slide-to="<%= index %>" class="playlist-item">
            <h4><%= video.title %></h4>
          </a>
        <% }); %>
      </div>
    </div>
  </div>
</div>
</section>
<script src="js/watch.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>

<script src="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.js" 
    type="text/javascript"></script>

    <script src="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
     <!-- cloudinary upload widget -->
     <!-- <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script> -->
    <!-- <script 
     src="/js/upload_widget.js" 
     type="text/javascript">
    </script> -->
    <script src="node_modules/cloudinary-video-player/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 

<%- include('partials/footer') -%>